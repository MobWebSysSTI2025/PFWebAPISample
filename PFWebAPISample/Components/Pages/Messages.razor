@page "/messages"

<link rel="stylesheet" href="css/styles.css" />
<div class="chat-container">
    <div class="messages" id="messages">
        @foreach (var message in messages)
        {
            <div class="message-row">
                <img src="https://static.wikia.nocookie.net/brainrotnew/images/a/ac/Tralalero_tralala.jpg" class="avatar" />
                <div class="message-content">
                    <div class="message-meta">
                        <span class="username">Tralalelo Tralala</span>
                        <span class="time">@message.Timestamp</span>
                    </div>
                    <div class="message-text">@message.Text</div>
                </div>
            </div>
        }
    </div>
    <div class="input-area">
        <input type="text" @bind="newMessage" @onkeydown="HandleKeyDown" placeholder="Type a message..." />
        <button @onclick="SendMessage">Send</button>
    </div>
</div>

@code {
    private string newMessage = "";
    private List<Message> messages = new List<Message>();

    private void SendMessage()
    {
        if (!string.IsNullOrWhiteSpace(newMessage))
        {
            messages.Add(new Message
                {
                    Text = newMessage,
                    Timestamp = DateTime.Now.ToString("HH:mm")
                });
            newMessage = "";
        }
    }

    private void HandleKeyDown(KeyboardEventArgs e)
    {
        if (e.Key == "Enter")
        {
            SendMessage();
        }
    }

    public class Message
    {
        public string Text { get; set; }
        public string Timestamp { get; set; }
    }
}
